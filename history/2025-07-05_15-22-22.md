## Prompt
Now I would like you to implement a new feature that will allow showing a beautiful card that links to each occurrence where a song is played by the vtuber in the past recordings. I have made the necessary database schema change and you can assume the data is already populated. I want you to:
- Implement a keyset paginated backend API via nextjs server actions, which retrieves, for each song, a list of recording occurrences. The API will be paginated, where the token is the base64 encoding of the occurrence's pubdate. Each record the server returns should contain:
  - bvid of the recording archive
  - cuover url of the recording archive
  - page number
  - duration
  - start second where the song is played
Essentially, merge the occurrence with the recording metadata so they are easily consumed by the front end
- Implement the frontend component that works with this API. The component should be an expanded view of the song row which is expanded when user clicks the expansion button.
- The view should use the paginated API and incrementally fetch more data when the user scrolls through it.
- For each record, render a styled card with this layout:

|-----------|
| cover pic |  Title/page
|                | <progress bar>
------------     
Where progress bar is based on start second/duration
- Each car can be clicked, which goes to the url https://www.bilibili.com/<bvid>?t=<start second>&p=<page number> where p is only set when page number > 1

Please proceed with the following principles:
- Thoroughly read the doc/ and source code to understand the structure of the project
- First implement the backend API with efficiency in mind. Pagination would be the key here, use your best knowledge of prisma and SQL to translate the API into the most efficient database access pattern
- Implement the frontend adhering to the style and feeling of the overall site. Use modern styling and animate transitions via framer motion when reasonable

#### Follow-up 1
Ok now fix a couple issues:
- The url for the song is actually www.bilibili.com/video/<bvid> and the parameters are the smae
- The cover images are not loading, but I click their src and I could see the picture. Why? Can you fix it?
- Now add a delete button to allow deleting the entry in the database. Add the deletion API to the crud server actions

### Follow-up 2
Ok now fix a couple issues:
- The url for the song is actually www.bilibili.com/video/<bvid> and the parameters are the smae
- The cover images are not loading, but I click their src and I could see the picture. Why? Can you fix it?
- Now add a delete button to allow deleting the entry in the database. Add the deletion API to the crud server actions

### Follow-up 3
The click still doesn't work. The URL is right and if I copy paste it in the browser, I could visit it. But not if clicking the card itself. Could you fix it? Is it related to how bowser/linking work?

### Follow-up 4
Ok the link element approach works, but the image is not loading for me and I always see the fallback. Could you reason about why? The URL themselves definitely work. If I paste the url to the browser I could see the image loading

### Follow-up 5
Still getting
@http://i0.hdslb.com/bfs/archive/277bf3d96abbfdf505c0843f524986ae177a672d.jpg
 403 Forbidden
strict-origin-when-cross-origin

### Follow-up 6
Great! One issue: the delete button doesn't work. When I click it it brings me to the linked url instead of deleting the occurrence

### Follow-up 7
Ok, now please implement the same feature for the main page. Change the buttom at the very right of SongRow.tsx to be an expansion, and show the expanded list of occurrences card.

- Be sure to style the component consistently with the overall styling. Give it a modern feel and mingle with the page.
- The width of the card should align with the width of the song panel. 
- Add animation where it makes sense.

### Follow-up 8
Couple bugs:
- Please don't show the "播放记录" row when not expanded. It's very ugly. Just expand the panel only when the user clicks the expansion.
- The order of the occurrence panel seems wrong. If a song has no occurrence, the panel of the song below it seems to be lifted up it its place and when I clicked, the screen is shaking a lot. Please fix

### Follow-up 9
Another batch of issues:
- The URL link seems wrong. Now when I click the card, I just got linked to the start of the video without start time and page applied
- Please remove the delete button on main page

### Follow-up 10
Whan I click the reaction buttom or the expansion buttom on mobile, the song is copied to the clipboard. I don't want that.

### Follow-up 11
Please make a few usability enhancements:
- Don't show the "收起" button when the panel is expanded, it is duplicate with the song row's expansion toggle.
- In the future the expansion panel might be long. I'd like the song row where the occurrences are being expanded to stick at the top of the screen so one could easily collapse all.
- Add some text to the right of the expansion toggle to notice user of the feature, like "直播里唱过" or something like that. It needs to have a soft touch but not be too distracting

### Follow-up 12
- Let's make the text "录播记录" and make it visible all the time. Also extend the click area so user can expand the list when clicking anywhere for the buttom or the text. Make the text a little bit more compact so the date can align with the reactions.
- The stickiness does not work. I want that as long as I'm inside an occurence list, the song row is sticky on top of the screen when I scroll pass it

### Follow-up 13
Ok I found another bug: I think when I expand a song with no occurrences. The pagination is broken so I end up sending a million requests to the backend action. Please fix it

### Follow-up 14
Doesn't fix it. Still sending a million requests

### Follow-up 15
Nope. Could you look at what you did for admin page and just replicate the logic here?

### Follow-up 16
Could you add comments everywhere for all the changes you make? For component, briefly explain what the component does and how it is used in the page. Also update all documentations

### Follow-up 17
Found some other bugs:
- When I expand the occurrence list, sometimes the song row disappeared and there is no way I could collapse the list. Please fix

### Follow-up 18
No. Revert everything you did in this step, and also remove all logic for making the row sticky. Let's keep it simple and dumb for now